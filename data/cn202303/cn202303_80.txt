光接入网络遥测技术的分析与实践 刘 刚  等 技术广角
中兴通讯技术
2023  年 6 月    第 29 卷第  3 期   Jun . 2023    Vol . 29  No. 35）采样数据的接收者
destination-groups 节点代表被订阅采样数据的接收者列
表，其下的每个 destination-group 节点均代表一个被选中的
目标组 。目标组可以理解为事先定义好的 、由一个或多个数
据接收者组成的群组 。
2.2 数据发布
Telemetry 数据发布是指数据源设备遵从数据订阅的要
求，完成指定数据的采集 ，并按指定样本周期 ，将采样数据
封装后定期上报给指定接收者 。
与数据发布相关的主要技术要点包括 ：数据发布使用的
协议和数据发布使用的数据编码类型 。
2.2.1 数据发布使用的协议
数据发布使用的协议包括 gRPC 协议和 UDP 协议 。表2
给出了这两种协议的对比 。
gRPC 协议适合 Telemetry 采样数据的发布 ，通过 proto 文
件定义标准化的数据信息模型 ，可以灵活高效地实现 Te‐
lemetry 遥测数据的推送 。在光接入网络中 ，CCSA 的Telem ‐
etry行业标准[8]指出 ，可以选择 gRPC 协议作为数据发布协议 。
在使用面向连接的协议 （例如 gRPC 协议 ）进行 Te‐
lemetry 数据发布时 ，网络设备内部分布式采集到的数据可
能会遇到系统级单连接的转发问题 ，数据并发上报能力受到
限制 。此外 ，采集层控制模块也可能受到系统可用的传输控
制协议 （TCP）长连接资源的限制 ，能够并发采集的网络设
备的数量也受到限制 。在光接入网络中 ，CCSA 的Telemetry
行业标准[4]指出 ，也可以选择 UDP 协议作为数据发布协议 。
2.2.2 数据发布使用的数据编码类型
Telemetry 遥测数据使用直观灵活的信息表达格式 ，同时
编码方式须支持高效压缩以保证海量数据的传输和存储效率 。Google 协议缓冲区 （ProtoBuf ）是源自 Google 公司的一
种针对结构化数据的序列化工具 ，拥有出色的序列化效率和
数据压缩率 ，而且与编程语言和平台无关 。ProtoBuf 的序列
化采用二进制而非文本 。虽然数据流的可读性差 ，但数据额
外开销极小 。ProtoBuf 的数据压缩效率高 ，解析速度高 。
在光接入网络中 ，CCSA 的Telemetry 行业标准[8]选择使
用层次化的 ProtoBuf 文件来分层定义 Telemetry 遥测数据的发
布格式 ，涵盖 RPC 层、Telemetry 层和业务数据层 ，规定了
每个采用路径各自对应的采样数据集的数据格式 。不同的
Telemetry 数据发布协议并不影响 Telemetry 数据的信息格式 。
无论是使用 gRPC 协议还是使用 UDP 协议 ，作为数据净荷的
Telemetry 层和业务数据层都使用完全相同的数据格式 。
3 光接入网络遥测技术的实践
中国电信积极推动网络遥测技术在光接入网络的应用 ，
牵头制订了 CCSA 标准 《接入网设备支持基于 Telemetry 接口
采集功能的技术要求 》 。2021 年8月，中国电信研究院组织
中兴通讯 、华为 、烽火三大 OLT 设备制造商进行 OLT 设备
的Telemetry 实验室联调测试 ，确定了光接入网络适用的
Telemetry 遥测技术 ，完成了技术方案及测试方案的更新 。
3.1 光接入网络遥测技术方案
1）光接入网络的 Telemetry 数据订阅者
在光接入网络中 ，为了确保网络的管控安全 ，Telemetry
数据订阅者只能是采控层的控制模块 ：OLT 设备只接纳采控
层控制模块发起的 NETCONF 数据订阅会话和数据订阅事务 。
2）光接入网络适用的 Telemetry 数据发布协议
OLT 设备作为光接入网络的局端设备 ，拥有多种类型业
务状态的数据 ：流量类统计数据 （样本间隔为 1 s） ，包括上
联 口 流 量 、无 源 光 网 络 （PON）口 流 量 、光 网 络 单 元
（ONU）流量 、ONU 业务流流量 、端口的队列流量 ；OLT 光
▼表2 gRPC 协议和 UDP 协议的对比
协议类型
gRPC 协议
UDP 协议规范性
源自 Google 公司的一个开源的 RPC框架
IETF RFC 768发布的一种传输层协议 ，一种无须预
先建立连接就可以直接发送 IP数据包的方法通用性
云原生计算基金会的孵化项目 ，
目前已被广泛使用
互联网基础协议之一 ，至今仍然
广泛使用技术特点
• 使用 Proto Buffer 可快捷定义服务
• 部署方便且支持扩展
• 跨语言跨平台的强大工具链
• 基于 HTTP 2实现高效编码数据流的双向收发
• 发送者在发送 UDP 数据前无须预先与接收者
建立连接 ，随时可发送且发送时延小
• UDP 数据包的传输是尽力而为 、没有保障的 ，
但不影响发送
gRPC ：Google 远程过程调用
HTTP 2：超文本传输协议第 2版IETF：国际互联网工程任务组
RFC：请求注释文档RPC：远程过程调用
UDP：用户数据报协议
76