大模型关键技术与应用 韩炳涛  等 企业视界
中兴通讯技术
2024  年 4 月    第 30 卷第  2 期   Apr . 2024    Vol . 30  No. 22.1 数据多样性与数据质量
数据多样性对于模型能力的全面性来说至关重要 ，模型
学习不同的能力 ，就需要对应的训练数据 。例如 GPT- 3训
练数据的构成既包含 Common Crawl 这类种类丰富 、总量庞
大的互联网数据 ，又包含维基百科 、书籍这类的高质量
数据 。
数据质量是模型能力的决定性因素之一 。如今 ，越来越
多的研究人员倾向于使用更少的高质量数据而非海量的低质
量数据来训练模型 。少而精的高质量数据在大幅降低训练成
本的同时 ，还有可能获得更高的模型性能 。
因此 ，如何评价数据质量成为一个关键问题 。2023 年
底的 Ziya2[6]给出了一套非常系统的评估标准 ，该标准综合了
程序评估和人工评估 。程序评估涵盖了启发式规则 、语言模
型、统计指标等方法 ，并对不同的指标赋予了不同级别 。系
统化 、程序评估与人工评估结合 ，为数据质量评估方法指明
了发展方向 。
中兴通讯结合业界研究成果 ，总结提炼出一套完整的数
据管理及处理方法 （如图 3所示 ） 。在数据管理方面 ，中兴
通讯强调 “分级分类 ” 。数据分级是将所有训练数据按质量
从低到高分为 1—5级，不同质量级别的数据应用于预训练
的不同阶段 。例如 ，1级数据为有害数据 ，严重影响模型性
能和安全性 ，需要从训练数据中予以过滤清除 ；2级数据为
普通网页数据 ，仅用于模型训练过程中的 warm-up 阶段 ；3
级数据为高质量网页 、书籍 、代码数据 ，用于为模型建立通
识知识 ；4级数据为更高质量的专业书籍 、论文 、教材 、试
题数据 ，用于提升模型的专业性 ；5级数据为最高质量精调
数据 ，用于大幅提升模型在各种任务评测中的表现 。数据分
类则是从为模型赋能的角度 ，将模型能力分为上百个类别 ，
为对应的训练数据建立主题 ，从而实现数据能力画像 。为了
实现上述数据分类分级管理 ，中兴通讯开发一套完整的数据
处理框架 ，如图 3所示 。2.2 预训练
生成式预训练是一种让大模型学习世界知识的有效方
法。这种方法的主要优势在于 ：它属于无监督学习方法 ，无
须对数据进行标注就可以得到海量训练数据 ；只需让模型学
习正确预测语料中的词 ，即可令模型理解语料中所的蕴含
知识 。
大模型训练算力需求的增长速度远超摩尔定律 ，因此所
需要的并行计算节点数不断增加 ，算力和显存是大模型训练
的主要瓶颈 。为了打破设备的算力和显存限制 ，目前有 3个
最主要的技术方向 ：1）以张量并行 （TP） 、流水线并行
（PP） ，数据并行 （DP）构成的 3D并行加速 ，其主要原理是
根据硬件集群的特征 ，如节点数 、单节点算力 、内存大小 、
节点间互联带宽及时延等 ，对计算任务进行不同维度的拆
分，以最优化利用硬件资源 ；2）以ZeRO （零冗余 ）系列为
代表的显存优化技术 ，其主要原理是尽可能将数据保存到内
存从而减少对显存的需求 （以增加带宽需求为代价 ） ；3）以
Flash Attention 为代表的底层算子优化 ，其主要原理是将多
个算子计算进行融合从而最大限度降低 “内存墙 ”对计算效
率的影响 。
上述算法实现涉及复杂工程优化 ，因此并行训练框架极
为重要 。Megatron-LM[21]是由英伟达深度学习应用研究团队
开发的大型 Transformer 语言模型训练框架 ，其在对 TP的支
持方面处业界领先 。DeepSpeed 是微软提出的并行训练框
架，其主要优势是支持 ZeRO[22]和Checkpoint[23]显存优化技
术，对训练显存紧张的场景更友好 。FairScale 是由 Facebook
提出的一个用于高性能和大规模训练的 PyTorch 扩展库 ，支
持全切片数据并行 （FSDP ） ，这是扩展大模型训练的推荐
方式 。
2.3 精调训练
大模型在各类任务中具有泛化能力 ，然而直接应用预训
练模型往往并不能满足所有场景的需求 ，这就引出了一个关
图3 中兴通讯数据处理框架数据收集 去噪 去重 敏感过滤 分类精炼 主题映射 质量评价 模型训练
模型训练
模型评估格式处理
数据获取
工具开发
数据源收集低质站点过滤
异常符号过滤
脏数据过滤
完整性保证文档级去重
段落级去重
句子级去重隐私过滤
非法过滤
暴力过滤类别定义
数据分类
逐类精炼算法打分
人工打分主题定义
数据画像
数据筛选
79