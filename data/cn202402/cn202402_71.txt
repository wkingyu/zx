大模型知识管理系统 周 扬   等 热点专题
中兴通讯技术
2024  年 4 月    第 30 卷第  2 期   Apr . 2024    Vol . 30  No. 22.2.1.1 分解子查询
分解子查询的核心理念在于将一个复杂的原始查询拆分
成若干个更小 、更易于处理的部分 ，其中每个部分均代表一
个信息独立的子问题 。为了实现这一目标 ，可以采用多查询
检索器 。该检索器借助 LLM ，从多个维度自动生成针对给定
用户输入的多个查询 ，进而自动执行提示优化流程 。对于生
成的每个子查询 ，多查询检索器都会检索一组与之相关的文
档，并最终对所有子查询检索到的文档采取并集操作 ，从而
构建出一个更广泛的潜在相关文档集合 。分解子查询可以突
破基于向量距离检索方法的某些局限性 ，从而获取一组更为
丰富和多元的检索结果 。
2.2.1.2 指代消解
指代消解技术适用于处理用户查询中含有指代词 （如
“它” “这个公司 ”等）的情况 ，有助于提高检索系统对用户
查询的准确性 。传统通过微调 BERT 进行指代消解的技术往
往只适用于有限 、简单的查询语句 ，在LLM 时代 ，相较于
传统的依赖专用小模型进行微调的方法 ，可以采用 Few-
shot Prompt 并结合思考 -行动 -观察 （CoT）的策略进行指代
消解 。通过将一些常见的指代消解场景作为 Few-shot 例子集
成到 LLM 的Prompt 中，结合 CoT方法 ，LLM 能够分析并处
理更复杂的指代消解问题 。
2.2.1.3 查询改写
在知识检索系统中 ，查询改写技术常常可以大幅提高检
索准确度 。它通过对用户最初的查询进行语言层面的优化与
调整 ，可以增强检索效率并提高结果的精准度 。此技术特别
适用于处理那些表达模糊不清 、含义不明确或结构过于复杂
的查询 。通过这种方式 ，系统能够更精确地把握用户的信息需求 ，并返回更相关的检索结果 。
为提高检索系统的准确性 ，查询改写技术依靠 LLM 的
强大能力 ，利用精心设计的提示词 ，让LLM 能够有效地改
写用户的查询 。为了进一步提升查询改写效果 ，我们还可以
引入一个辅助模型 “重写器 ”[11]。这个辅助模型专门负责调
整用户查询 ，使其更好地适应固定检索器和 LLM 的处理要
求。辅助模型重写器可以通过收集领域数据进行有监督的预
训练或微调获得 。这样 ，重写器就能更好地满足实际应用场
景中的改写需求 。
2.2.2 知识检索
在知识检索过程中 ，通常采用多种检索策略来增强检索
的深度 ，提高检索结果的准确性 。如图 5所示 ，混合检索通
常将用户查询问题进行改写生成一个或多个查询 。经过查询
路由模块后 ，这些查询问题被分发到不同的检索方法流程
中。常见的检索方法包括数据库查询 、向量检索 、QA检索 、
知识图谱检索 、插件检索 、关键词检索等 。经过多重检索方
法检索后每一种检索方法将输出 TopK 个检索结果 。由于不
同检索方法生成的检索结果打分标准不同 ，它们并不能简单
地组合在一起进行排序 ，这时候就需要引入新的重排算法来
对这些 TopK 结果进行组合和重新排序 ，从而得到最终的
TopK ，并丢弃其他的候选检索结果 。这些最终被选中的
TopK 将作为上下文和用户查询问题一起交给大模型 ，让
LLM 基于上下文内容为用户的提问生成答案 。
2.2.2.1 知识图谱检索
知识图谱检索是一种利用知识图谱信息来检索和提供与
特定任务相关信息的技术 。传统的知识图谱检索较为复杂 ，
一般包括从查询中进行实体识别 、关系识别和查询匹配等步
图 5 混合检索过程API：应用程序编程接口      DB ：数据库      KG ：知识图谱      LLM ：大语言模型      QA ：问答     SQL ：结构化查询语言用户问题SQL生成
向量嵌入
向量嵌入
Cypher 生成
Text2API
关键词提取DB查询
向量检索
QA查询
KG查询
插件查询
关键词搜索查询改写 查询路由 重排 LLM 答案TopK TopK
67