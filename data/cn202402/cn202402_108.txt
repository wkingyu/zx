基于动态通道绑定的更高速无源光网络 张伟良  等 技术广角
中兴通讯技术
2024  年 4 月    第 30 卷第  2 期   Apr . 2024    Vol . 30  No. 2将其封装在 XGEM 帧中 ，以形成 XGEM
帧序列 。XGEM 帧序列被分割成数据单
元。每个数据单元按照最早最小规则在
各个通道的上行带宽上发送 。当所有这
些带宽被数据单元填满后 ，ONU 会在
每个通道上构建 XGTC 帧。数据单元序
列作为净荷被封装在 XGTC 帧中 ，进一
步增加上行物理同步块 PSBu 和FEC 校
验。OLT 在 每 个 通 道 上 解 析 PSBu 和
FEC 校验 ，根据本地保存的 uBWmap ，
获取每个 ONU 在各个通道上的上行带
宽，并根据这些上行带宽按照最早最小
原则 ，在各通道上逐个接收相应 ONU
发送的数据单元形成数据单元序列 ，并
进一步组装成 XGEM 帧序列 。由于现有
标准 ITU-T G .9804 .2支持上行带宽分配
结构 ，并且上行带宽分配结构是 ONU
从OLT 发送的下行帧中获取的 ，因此上
行序列化发送没有引入额外的开销 ，其
带宽效率和单通道发送方式是一样的 。
图6展示了下行序列化发送过程 。其中 ，数据单元为 4
字节 ，用户数据帧和 XGEM 帧序列仅仅是示例 ，同样不影
响下行序列化传输方法的实现 。为了支持下行方向的序列
化发送方法 ，需要确定下行带宽的分配方式 。文献 [10]提出
了下行带宽分配方法用于 ONU 节能 。该方法暂时未写入
ITU-T G .9804 .2。我们参考该文献并引入下行带宽分配 。
OLT 收集各 ONU 在每个通道上的下行带宽 ，将其组装成下
行带宽分配结构 dBWmap 并发送 。OLT 进一步收集业务数据
帧并将其封装成 XGEM 帧。XGEM 帧被分割成数据单元 。每
个数据单元按照最早最小原则在各通道的下行带宽上发送 。
当所有这些各通道上的带宽填满数据单元后 ，OLT 在每个
通道上构建 XGTC 帧。数据单元序列作为净荷被封装在
XGTC 帧中 ，并进一步增加下行物理同步块 PSBd 和FEC 校
验。在接收侧 ，ONU 在每个通道上解析 PSBd 和FEC 校验 ，
获 取 XGTC 帧，从XGTC 帧 头 中 解 析 下 行 带 宽 分 配 结 构
dBWmap ，并收集属于自己的各通道上的下行带宽 。在这些
下行带宽中 ，ONU 会按照最早最小原则从各个通道逐个接
收数据单元形成数据单元序列 ，并进一步组装成 XGEM 帧
序列 。由于下行带宽分配结构还不是标准 ITU-T G .9804 .2中
的功能结构 ，因此 ，引入下行带宽分配结构会引入额外的
开销 。参考上行带宽分配结构 ，一个通道上的下行带宽分
配由一个带宽条目指示 。一个带宽条目为 8字节 。这意味着每个通道需额外引入 8字节开销 。
本文所述序列化传输方法是指 ，将单通道传输的 XGEM
帧序列分布到各个通道上传输 ，不需要在每个通道的数据单
元序列前增加 XGEM 帧头 。这使得上行序列化传输的带宽
效率和单通道传输一样 ，避免了动态通道绑定导致的带宽效
率下降 。对于下行序列化传输的带宽效率 ，由于下行带宽分
配未写入标准 ，引入下行带宽分配会增加额外的开销 。如表
5所示 ，随着连续帧数的增加 ，带宽效率逐步接近单通道传
输 效 率 。当 然 ，如 果 下 行 带 宽 分 配 将 来 被 写 入 ITU-T 
G.9804 .2标准 ，下行序列化传输的带宽效率将和单通道传
输一样 。
3.2 顺序恢复[11-12]
HSP 数据发送有严格的同步机制 。下行方向每 125 μs传
输一个超帧 ，每个超帧头部均携带 PSBd 。顺序恢复机制可
以利用这一特性 。如图 7所示 ，OLT 在各通道上同步发送
PSBd ，且携带相同的超帧号 （SFC） ，作为各通道发送数据
的共同参考点 。每个数据单元到同步 PSBd 的距离决定了自
身的发送顺序 。离同步 PSBd 近的数据单元发送时间早 ，离
同步 PSBd 远的数据单元发送时间晚 。对于离同步 PSBd 一样
远近的数据单元 ，根据最早最小原则 ，在编号更小通道上的
数据单元发送时间更早 。
上行 PHY 帧和下行 PHY 帧是同步的 。根据前文所述 ，
dBW ：下行带宽
ONU ：光网络单元PSBd ：下行物理同步块
XGEM ：数据封装XGTC ：传输汇聚
▲图6 下行序列化传输示例XGTC ：传输汇聚λ1
λ2
λ3
λ4PSBd
PSBdXGEM
帧头XGEM
帧头XGEM 有效载荷 XGEM 有效载荷XGEM
帧头XGEM 有效载荷
…… 0 1 2 3 17 18
ONU x在波长 λ1上的 dBW
8  11 14 17
6   9 12 15 18
0 1 2 3 4 57 10 13 16
125 μsPSBd
PSBdXGTC 帧头1
XGTC 帧头2
XGTC 帧头3
dBWmap 4XGTC 帧头4dBWmap 3dBWmap 2dBWmap 1
ONU x在波长 λ2上的 dBW
ONU x在波长 λ3上的 dBW
104