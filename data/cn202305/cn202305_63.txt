基于机器学习的智能路由解释方法 孟子立  等 热点专题
中兴通讯技术
2023  年 10 月    第 29 卷第  5 期   Oct . 2023    Vol . 29  No. 5其中 ，D(YW,YI)、 ||W||、 H(W)分别展开为 ：
D(YW， YI)=ì
í
îïïïï
ïïïï∑YWlog YW
YI ，  离散
∑ ||||YW-YI2
，  连续 ， （4）
||W||=∑
v，e||Wev， （5）
H(W)=-∑
v，e( ) Wevlog Wev+() 1-Wevlog () 1-Wev ， （6）
其中 ，优化目标包含 3个部分 ：
1）性能退化 D(YW,YI)。关键的连接应是那些对网络系
统输出有很大影响的连接 ，这是与任务无关的 。因此 ，我们
需要测量机器学习智能路由系统原始输入特征和掩码 W加权
的输入特征的差别 。掩码特征 （需求 、容量 ）生成的路由决
策应该与原始决策类似 。我们将原始输入和输入掩码 W生成
的决策分别记为 YI和YW。因此 ，我们最大化 YW和YI之间的
相似性 ，记为D(YW, YI)。路由系统的输入 /输出有时是连续
的，有时也可能会是离散的 。例如 ，当预测一条流的转发路
径时 ，路由系统的输出就是一个离散的节点序列 ；当预测一
条链路上的拥塞程度时 ，路由系统的输出就是一个连续的
值。针对不同的变量类型 ，我们分别采用不同的距离估计方
法。我们采用 KL散度来测量离散输出 （如路由决策序列 ）
和均方误差 。这两者都是机器学习社区中常见的相似性
度量 。
2）解释简洁性 ||W||。通常 ，人们可以理解的解释数量
是有限的 。因此 ，关键连接的数量也应尽可能少 ，以便网络
操作员理解 。如果算法提供了太多的 “关键 ”连接 ，网络操
作员则会感到困惑 ，无法轻松解释网络系统 。我们将W的简
洁性定义为所有元素的和 （矩阵的规模 ） 。另外 ，我们还需
要在优化目标中惩罚掩码 W的大小 。
3）确定性H(W)。此外 ，我们还期望 W的结果是确定
的，即对于每个连接 (v, e)，要么
和结果毫无关系 （Wev接近 0） ，
要么对结果影响很大 （Wev接近
1） 。否则 ，智能体可能将学会掩
盖所有具有相同权重的连接并生
成无意义的解释 。在本文优化掩
码W的熵 ，以鼓励W中的连接接
近1或0，其中熵是信息论中的
不确定性度量 。
为了平衡上述的优化目标 ，我们为网络操作员提供了两个可定制的超参数 （λ1和λ2） 。
例如 ，路由结果的在线监视器可能只需要最关键的信息来帮
助它快速做决策 ，而如果管理员想要离线分析解释结果 ，则
解释结果必须要很详细才能进一步改进智能路由模型 。在这
种情况下 ，网络操作员可以增加 （或减少 ）λ2来减少 （或
增加 ）具有中位掩码值的未确定连接的数量 。然后 ，我们将
向网络操作员公开更少 （或更多 ）的关键连接 。网络操作员
可以在其应用程序中调整优化目标不同部分的权重 。
在这种情况下 ，连接对输出的贡献可以被定量表示 。我
们可以通过连接所涉及的链路流量来定量地了解连接对输出
的贡献 。同时 ，还可以通过掩码值来进一步判断哪个连接上
的哪个流量在整体结果中起主导作用 。这样 ，我们就可以提
供更细粒度的解释 。
4 一个解释的例子
我们首先复现了 RouteNet[3]的代码原型 ，并基于真实流
量数据在 RouteNet 上测试了所提出的解释方法 。同时 ，我们
测试了 RouteNet 中的 NSFNet 拓扑以及流量数据 ，具体如图 2
所示 。如第 3节中所描述的解释方法 ，每个连接的掩码值 W
代表了该连接对于最终智能路由方法的决策影响程度 。掩码
值前 5名的连接组合列见表 1。
在表 1中，可以看出 ，掩码值越接近于 1，该链路的选
择对整体路由路径的选择就越关键 。例如 ，路由路径 6→7
→10→9和链路 6→7之间的掩码值为 0.886，这说明在节点 6
▼表1 RouteNet 在NSFNet 上的解释结果的前 5名掩码值
#1
#2
#3
#4
#5路由路径
6→7→10→9
1→7→10→9
7→10→9→12
8→3→0→2
6→4→3→0关键链路
6→7
1→7
10→9
8→3
6→4掩码值Mve
0.886
0.880
0.878
0.875
0.874决策原因
路径更短
路径更短
负载更低
路径更短
负载更低
图2 两个 RouteNet 路由结果解释方法的示意（a）表1中连接 #1的选择 （b）表1中连接 #4的选择1
0 3
4
2 578
9
12 1011
13 6 108 1
0 3
2 54 6 137 119
12
  9→12：5.54
11→12：10.88
59