数据管理系统发展趋势与挑战 韩银俊  等 企业视界
中兴通讯技术
2023  年 8 月    第 29 卷第  4 期   Aug . 2023    Vol . 29  No. 4询优化和学习型索引等 。基数估计是数据管理系统查询优化
的一大核心问题 ，更精确的基数估计能够帮助优化器选择更
优的查询计划 。AI驱动的学习型基数估计方法将基数估计
作为回归问题 ，该类方法收集具有真实基数 （作为标签的查
询池 ） ，提取查询特征并将它们编码为向量 ，随后训练模型
并将查询映射到基数 。在推理时 ，查询被编码为特征向量 ，
通过输入回归模型得出基数估计结果 。由AI驱动的学习型
查询优化器受到研究者的广泛关注 。Neo[18]是第一个学习型
查询优化器 ，通过强化学习方法生成延迟最低的执行计划 。
这类优化器能够以更少的代价取得更好的性能 。麻省理工学
院首次提出学习型索引[19]概念 ，使用机器学习模型替代传统
的索引结构 。学习型索引可以大幅降低传统索引的空间代
价，提高查询性能 。
中兴通讯 -北京大学联合实验室围绕智能化数据管理进
行创新和实践 ，研发了智能化数据管理模块 DBRob ot，如图
2所示。
DBRobot 包括外置智能优化和内核智能优化两大功能 。
外置智能优化实现了业务无感一键式诊断优化 ，包括智能监
控、智能诊断 、智能优化和数据库 （DB）大模型 4个部分 。
其中 ，智能监控模块采集日志和参数等多维指标 ，进行趋势
预测和异常检测 ，对发现的异常及时告警 ；智能诊断模块通
过细粒度性能诊断 、异常分析和多指标关联分析等手段实现
慢SQL诊断 、系统亚健康诊断和系统故障诊断 ，识别问题根
因；智能优化模块针对问题根因通过智能参数调优 、索引智能推荐 、SQL 智能重写等技术 ，排除诊断出的故障 ；DB大
模型模块利用大语言模型的上下文学习和思维链能力实现数
据库的智能问答 、智能运维和 Text-To-SQL 等功能 。
内核智能优化聚焦 AI4DB和DB4AI两个方向 。在AI4DB
方 向 ，EBASE 实 现 了 基 于 AI的 查 询 优 化 器 LOGER[20]。
LOGER 使用深度强化学习方法 ，在搜索过程中对部分查询
计划进行评价 ，并生成完整的查询计划 。在DB4AI方向 ，引
入支持向量计算的训练算子 ，可实现库内数据训练和训练模
型的存储 ；引入模型调用接口 ，使库内数据能够在查询后进
行推理分析 。
ChatGPT 引发的大模型浪潮 ，催生了向量数据的存储 、
检索需求 。传统的数据库索引结构难以有效地处理向量之间
的相似度搜索和邻近性查询 。向量数据库应运而生 。向量数
据库的核心思想是 ：将向量和对应的标识符存储在数据库
中，并构建索引以加速相似度搜索 ，满足如图像检索 、推荐
系统 、人脸识别和语义搜索等应用的需求 。中兴通讯向量数
据库 EBASE-Vector 能够高效地解决向量相似度检索和高密
度向量聚类等问题 ，支持拍字节 （PB）级向量数据的管理 ，
通过与大模型技术和 LangChain 生态的融合 ，在高效存储和
检索向量数据的同时 ，使得 AI应用开发更加高效便捷 。中
兴通讯 EBASE 在大模型与数据管理融合领域持续创新 ，发
布了业界领先的数据库大模型 Nebula-EBASE 。该模型具备
Text-To-SQL 、智能问答和智能运维等能力 。
近几年 ，AI技术被广泛应用在数据管理领域中 。总体
AI：人工智能 DB：数据库 SQL：结构化查询语言
▲图2 中兴智能化数据管理模块 DBRobot面向模型训练的执行计划常用 AI模型的训练算子
基于推理语句的模型选择基于学习的统计信息
基于 AI的查询优化器查询解析器
基于代价的查询优化器SQL处理引擎
推理模型执行AI算子执行
向量查询执行SQL执行引擎
行向量化执行引擎
（分布式 ）并行执行框架基于学习的统计信息
基于 AI的查询优化器
行/列/行列/内存存储引擎
B-Tree/Bitmap数据存储引擎
智能数据清洗算法模型存储引擎
向量化索引存储智能调度管理
智能查询处理
智能执行调度
学习型索引
智适应缓存
智能数据分布内核智能优化 外置智能优化
①智能检测
风险感知
与告警故障检测
与发现
②智能诊断
异常根因
诊断多指标
关联分析
③智能优化
故障恢复
查询改写物理设计
推荐
④DB大模型
智能问答
和运维Text-to-
SQL
已有内核技术 AI4DB技术 DB4AI技术 智能运维组件
67