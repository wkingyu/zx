通用在网计算系统架构及协议设计 姚柯翰  等 热点专题
中兴通讯技术
2023  年 8 月    第 29 卷第  4 期   Aug . 2023    Vol . 29  No. 4为解决上述问题 ，我们在架构设计层面 ，从在网计算的
通用性和应用设计的友好性出发 ，设计了 S（任务调度层 ） 、
C（在网计算控制层 ） 、I（基础设施层 ）3层通用在网计算
架构 ，系统架构 如图 3所示。
2.1 基础设施层
基础设施层包含执行计算任务的端侧主机节点以及在网
计算节点 。由于异构网络设备在硬件架构方面存在较大差
异，这些在网计算节点能够提供的计算能力也不同 。这意味
着同一个在网计算原语在异构网络设备内部可以有不同的实
现方式 。针对不同场景下在网计算原语 ，很多研究进行了分
类和总结[7]。本文在这些研究的基础上 ，进一步设计了面向
异构在网计算节点的统一北向接口 ，在网计算节点通过北向
接口上报在网计算原语信息 ，对外提供统一的服务接口 。这
使得在网计算更具通用性 。
在端主机侧 ，应用程序也需要进行相应适配 。网络无法
保证大部分在网计算应用独立完成计算任务 ，因此需要通过
端网协同机制来完成 。端主机侧应用程序需要感知在网计算
任务 ，这样可以保证计算的完整性 ，同时可以提高网络传输
的可靠性 。端主机侧通过北向接口连接端侧任务控制器 ，实
现端侧计算任务分配 。
2.2 在网计算控制层
在网计算控制层是实现端网协同在网计算的关键 。控制
层包含主机控制器和在网计算控制器 。主机控制器根据应用
场景按需部署 ，主要负责主机任务部署以及端到端的可靠性
保障 。在网计算控制器主要负责通用的网络管理以及在网计
算任务部署和控制等 。在网计算控制器通过南向接口实现网
络管理功能 ，包含网络设备管理以及网络拓扑管理 。网络设
备管理包括网络设备状态 、网络设备负载 、网络设备计算能
力、网络设备计算资源管理等 ，其中网络设备的计算能力是
在网计算控制器和传统网络控制器最大的不同 。网络设备的
计算能力通常通过在网计算原语 、在网计算数据结构来表
示。网络拓扑管理包括网络拓扑更新 、链路状态监控等 。主
机控制器和在网计算控制器共同实现端网协同控制 ，并根据
网络资源状态综合选路 ，为在网计算和转发选择一条最优
路径 。
2.3 任务调度层
任务调度层实现在网计算系统和应用的对接 。应用将任
务需求提交给统一的任务调度器 。任务调度器通过南向接口
对接端侧控制器以及在网计算控制器 ，收集端侧和网侧的当前计算资源状态 。任务调度器结合应用任务请求及计算资源
状态 ，基于特定的算法进行计算图设计 ，生成计算节点之间
的逻辑依赖关系 ，进而产生具体的任务分配策略 。恰当的任
务调度策略可以实现合理的在网计算资源分配 ，从而在保证
任务处理性能的同时优化网络管理 。
3 基于 SRv6协议的通用在网计算的实现
通用在网计算框架不约束数据面转发协议 。本节中 ，我
们以数据面运行基于 IPv6的段路由 （SRv6）协议为例 ，说
明通用在网计算框架的工作机制 。
3.1 基于 SRv6协议的通用在网计算实现流程
基于 SRv6的集中式通用在网计算架构如 图4所示。该
架构未部署主机控制器 ，任务调度器直接对接服务器 ，在网
计算控制器负责承接在网计算任务 ，数据面运行 SRv6协议 ，
SRv6包头在接入交换机上封装 。
1）管理员配置在网计算控制器 ，将在网计算原语和在
网计算数据结构模型配置生成模板库 。
2）网络设备初始化时 ，上报自身在网计算能力 ，实现
标准的在网计算原语和在网计算数据结构 。设备自身的实现
可能有计算精度 、数据范围等差异 。网络设备平稳运行后 ，
周期上报自身负载和在网计算能力变化 。图3 通用在网计算架构INC：在网计算任务调度层
调度器
主机资源 、INC设备资源
基于任务调度策略进行计算任务拆分
主机任务 INC任务
在网计算控制层
端网协同
主机管理
主机任务控制INC设备管理
INC任务控制主机控制器
（可选）
主机任务部署
端网协同INC控制器
INC任务部署
网络拓扑管理
端网协同
基础设施层
主机 INC设备
45