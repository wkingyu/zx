东数西算场景下的算力网关研发及应用 马思聪  等 热点专题
中兴通讯技术
2023  年 8 月    第 29 卷第  4 期   Aug . 2023    Vol . 29  No. 4配置与算力网络相关协议进行组合匹配 ，具
有灵活 、高效 、可编程等特点 ，有助于算力
网络相关协议的制定 。算力网关整体架构 如
图1所示，主要分为硬件基础 、基础软件平
台、芯片接口和操作系统 4个部分[3]：
1）硬件基础
硬件是算力网关系统运行的物理基础 ，主
要由 CPU、交换芯片 、网卡 、存储和外围硬件
等构成 。其中 ，CPU 是对计算机的所有硬件资
源（如存储器 、输入输出单元 ）进行控制调配
并执行通用运算的核心硬件单元 ，主要管控系
统运作 ；交换芯片主要提供高性能和低延时的交换能力 ，是
算力网关的核心芯片 ；网卡分为用于设备管理的管理网卡和
用于网关与网络中其他设备通信的业务网卡 ，业务网卡与交
换芯片共同决定了算力网关的转发性能 ；存储主要包括内存
和硬盘 ，用于设备应用数据的存储和保存 ；外围硬件主要包
括风扇 、电源等用于维持设备正常运行的其他基础硬件 。
2）基础软件平台
基础软件平台由开源网络安装环境 （ONIE ） 、开源网络
Linux （ONL）以及硬件驱动构成 。其中 ，ONIE 为算力网关
提供一个开放的安装环境 ，可实现网关硬件和网络操作系统
系统的解耦 ，支持在不同厂商的硬件上引导启动算力网关操
作系统 ；ONL 建立在开放网络硬件上 ，向网关系统提供基础
操作系统 ，为交换硬件提供管理接口 ，使用 ONIE 来安装到
板载闪存中 。
3）芯片接口
交换机抽象接口 （SAI）是一种标准化的应用程序编程接
口（API） ，可以看作是一个用户级的驱动 。在不同的专用集
成电路 （ASIC ）芯片上 ，SAI为上层应用提供了统一的 API。
SAI的具体实现由不同 ASIC 芯片提供商负责 ，使用者不需要
关心网络硬件供应商的硬件体系结构的开发和革新 ，通过始
终一致的编程接口就可以很容易地应用最新 、最好的硬件 。
SAI本质就是在各 ASIC 的软件开发套件 （SDK）之上抽
象出统一接口 。芯片厂商研发的 ASIC 的SDK 需要与这层抽
象适配 ，使得转发应用能够在不同的 ASIC 上运行 。SAI向上
为操作系统提供统一的 API，向下可以对接不同的 ASIC 。
4）操作系统
算力网关操作系统基于社区版本的云开发网络软件
（SONiC ）开发 ，通过拓展协议和网关接口等能力实现了算
力网络所需的相应功能 。
算力网关操作系统由多个功能模块组成 ，这些模块通过
集中式和可扩展的基础架构相互交互 。本系统模块间交互依赖于 redis 数据库引擎 （一个键值数据库 ，提供独立于语言
的接口 ，可以在所有子系统之间进行数据持久化 、复制和多
进程通信 ） 。通过依赖 redis 引擎基础架构提供的发布者 /订阅
者消息传递模型 ，应用程序可以仅订阅它们需要的数据 ，并
避免与其功能无关的实现细节[4]。
算力网关操作系统将每个模块放置在独立的 docker （容
器）中，以保持语义相似组件之间的高内聚性 ，同时减少不
相关组件之间的耦合 。每个组件都被设计得相对独立 ，摆脱
了平台和底层交互的限制 。当前 ，算力网关操作系统主要包
含以下几个 dockers ：Bgp、Web、Database 、SwSS 、Syncd 、
Teamd 、Pmon 、DHCP-relay 等。
1.2 组网方案
算力网络目前在技术路线上可以分为集中式 、分布式和
混合式 3种。在算力网关应用部署中 ，我们主要考虑混合式
和分布式两种组网方案[5]。
1）混合式方案
在混合式的方案中 ，算网编排系统依靠云 /算管控模块
通过算力网关收集来自每个资源池的算力信息 ，通过网络管
控模块收集网络拓扑信息 。算网编排系统确定最优算力资源
节点和网络路径 。云/算管控模块与网络管控模块分别下发
算力资源分配指令和路由策略 ，如图 2所示。
在此架构下 ，算力网关主要功能包括 ：获取算力节点的算
力信息及链路信息 ，接收网络管控模块下发的路径策略信息等 。
2）分布式方案
在分布式方案中 ，算力网关需要实现算力资源感知 、算
力路由分发 、资源表项生成 、策略定制等全部功能 ，如图 3
所示 。除支持算力信息发布和通告外 ，分布式方案还需通过
算力和路径计算生成路由策略 ，并依据用户和应用感知对路
由策略进行绑定 ，进而实现对算力资源和网络资源的信息同
步与统一调度 。CPU：中央处理器
ONIE ：开源网络安装环境ONL：开源网络 Linux
SAI：交换机抽象接口
▲图1 算力网关整体架构算力网关操作系统 算力路由模块 数据库 管理界面 …… 其他应用
芯片接口 安装 SAI调用
基础软件平台 ONIE ONL 硬件驱动 抽象
硬件基础 CPU 芯片 网卡 存储 外围硬件 交换芯片
03