算力网络资源协同调度探索与应用 彭开来  等 热点专题
中兴通讯技术
2023  年 8 月    第 29 卷第  4 期   Aug . 2023    Vol . 29  No. 4式为 ：
β1=S0的带宽需求
Si的带宽需求 ， （5）
β2=S0的时延需求
Si的时延需求 ， （6）
β3=S0的抖动需求
Si的抖动需求 ， （7）
β4=S0的丢包率需求
Si的丢包率需求 ， （8）
其中，如果 S0或S中参与对比的应用没有对其中某项指标
提出需求 ，则不进行该项的比较 ，也不计入总公式 。另外 ，
网络相似度计算指标可以根据应用类型的实际情况进行不
同的选取和设计 。在本公式中 ，若任何有效的 βi值均在
0.85～1.15内，则判断 S0与Si网络资源需求相似 。当S0与Si
的算力资源需求和网络资源需求都相似时 ，系统则认定 S0
与Si为相似业务 。此时 ，对S中其他应用 /请求的继续比较
将停止 。
系统在日志 /数据库中查询已部署过的 Si部署策略 ，并
统计用户通过手动选择的 4种调度策略各自的总次数 ，之后
为待部署微服务调用选择次数最多的策略 。对S0进行部署
后，系统会调用相关算法输出相应的部署参数 （云、集群 、
副本数 ） 。如果在标签匹配步骤中没有匹配到与待部署微服
务具有相同标签的已部署微服务 ，则直接随机为待部署微服
务调用一种部署策略 。
2.5 历史策略匹配模块
若对 S中的所有应用进行标签匹配后 ，均未发现与 S0的
相似应用 ，则使用历史策略匹配模块进行调度 。
对于集合 S={S1,S2,…,Sn}中的所有应用 ，统计用户通
过手动选择 4种调度策略各自的次数 （从日志 /数据库中获知
相应信息 ） ，之后使用选择次数最多的策略对 S0进行部署 ，
并调用相关算法输出相应的部署结果 （云、集群 、副本数 ） 。
如果未能确定调度策略 ，则随机采取一种感知调度策略进行
部署 ，并输出部署结果 。
历史策略匹配模块首先需要输入集群对象列表 、候选集
群名称列表 、微服务对象 、微服务标签信息以及历史微服务
数据文件地址 ，然后再进行初始化操作 ，遍历 N个历史微服
务，初始化微服务的对象 、场景标签矩阵 、开发技术标签矩
阵以及资源需求参数矩阵 。遍历操作会生成 N个历史微服务的对象 、场景标签向量 、开发技术标签向量以及资源需求参
数向量 ，使待部署微服务也有 3个向量 。为了计算微服务之
间的相似度 ，流程中使用了协同过滤算法 。协同过滤算法的
核心思想是 ：通过用户的交互反馈行为 ，计算用户或者物品
之间的相似性 。公式 （9）可计算对应向量的相似度 ，公式
（10）用于计算两个微服务之间的相似度 。若历史微服务综
合相似度序列标准差小于 1×10-4且相似度均小于 0.5，则表
面历史微服务均不与待部署微服务相似 。这时系统可随机选
择成本 、SLA、负载 、能效感知等资源调度策略 ，否则选择
与待部署微服务综合相似度最高的历史微服务的部署算法 。
sin (v1，v2)=v1⋅v2
| |||v1||⋅||v2 ， （9）
SIM=1
3∑
13
Si 。 （10）
2.6 资源调度策略部署模块
微服务匹配筛选过程完成后 ，若找到了相似度较高的微
服务 ，则按照匹配微服务使用的资源调度策略进行部署 ，否
则随机选择一种资源调度策略部署 。多目标优化的算力资源
调度系统能够组合多种不同的资源调度策略 。多种策略算法
可以描述为公式 （11） ：
rssi=Function(server，service，request) ， （11）
其中 ，rssi表示第 i种资源调度策略 ，可以用一个函数来表
示；server表示集群参数信息 ；service表示微服务请求信息 ，
如SLA 的请求参数 、成本请求参数等 ；request为其他请求参
数如输出的集群数量等 。
进行第 i种资源调度策略下的部署时 ，系统首先输入微
服务信息 （包括微服务请求的各项指标参数 ） ，输入集群信
息（包括集群静态参数和不断变化的实时参数 ） ；然后以第 i
种策略计算最优的集群如计算成本最优的集群 、SLA 最优的
集群等策略 ；最后输出部署结果 。
在处理请求消息缓存队列中的用户请求时 ，算力网络资
源调度系统使用微服务部署时的算法类型为这些请求进行调
度。系统调度算法输出的调度结果有 ：云、集群 、每个集群
接收的请求 。
资源策略部署模块首先需要输入应用请求信息及微服务
历史数据 ，根据微服务请求信息 ，构建应用请求模型 ；然后
查找应用请求的微服务部署信息 ，根据微服务部署时使用的
感知算法执行相同种类的应用请求调度算法 。得到的输出结
果包括集群名称 、副本数 。
29