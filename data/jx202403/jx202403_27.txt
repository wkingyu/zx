图1  中兴通讯RoCEv2网络端网
       协同创新方案2024/NO.03
中兴通讯技术 ( 简讯 ) 
25法对流量进行实时精准调控，使端到端路径流量
达到高吞吐、低时延、无拥塞的最佳状态。
端网协同多路径精准流控技术
网络侧与端网配合，充分利用RoCEv2 网络
ECMP路径和多种负载均衡技术，提升数据传输
效率。
ECMP路径端网协同通告
AI大模型训练数据中心的RoCEv2网络采用胖
树CLOS架构，拥有丰富的ECMP路径。RoCEv2网
络控制器掌握全网拓扑，并向端侧同步ECMP路
径信息，以优化数据传输，提升网络效能。
根据流量特征匹配的负载均衡技术
端侧根据流量特征（如老鼠流、大象流）选
择不同的负载均衡技术，通过报文哈希或源端口
散列进行选路，并可根据网络负载实时调整策
略，以提升数据传输效率。
随着 AI大模型参数从千亿迈向万亿，以及 AI
芯片算力供给受限，万卡规模的智算集群网络成
为必然，大规模组网场景下的精细化端网拥塞控
制成为业界亟待解决的共同挑战。中兴通讯提出
的RoCEv2网络端网协同创新解决方案，旨在改进
网络的吞吐率，强化AI 大模型训练网络性能，进
一步释放AI算力，提升AI大模型训练效率。上（见图 1）。该方案在拥塞控制和精准流控两
个方向实现端网协同创新。
端网协同新型拥塞控制技术
网络设备通过快速CNP和带内遥测技术及时
准确的向端侧提供链路拥塞信息，实现新型拥塞
控制技术。
快速CNP技术
传统DCQCN网络，当网络设备出现拥塞时，
相关链路的数据报文会打上ECN 标记，目的端网
卡收到ECN标记报文再向源端网卡发送CNP报
文，源端接收到CNP报文后进行调速，该过程周
期较长，调整速率响应缓慢。我们提出快速 CNP
解决方案，中间交换机检测到拥塞时，会迅速向
源端网卡发送包含详细拥塞信息的CNP报文，源
端网卡能更快地利用这些信息精准调整流量，从
而迅速缓解网络拥塞。
基于带内遥测机制的精准拥塞流控技术
传统DCQCN中的ECN拥塞指示只有1bit，无
法精确表达链路拥塞程度，源端也就无法进行精
准流量调控。我们提出了基于带内遥测技术携带
更多路径负荷信息的解决方案，中间设备在遥测
报文中填充可用带宽、队列深度、时间戳、发送
字节数等信息，端侧收集齐路径所有网络设备的
遥测信息后，根据训练调优后生成的流量调度算60%±90%+吞
吐
率
传统RoCE网络
新型RoCE网络端网协同
无损交换机网络
（Fabric）
管理
RoCE控制器 
 RoCE交换机
高速互连
快速CNP
带内遥测 带内遥测路径通告路径通告
DPU
GPU服务器
（端）GPU服务器
（端）DPU 高速互连