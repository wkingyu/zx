专  题 智能算力
24中兴通讯Cloud&AI网络
规划总工杨茂彬
面向AI大模型训练的高性能网络
C当前RoCEv2 网络拥塞及流控机制问
题分析
RoCEv2网络中，DCQCN是最常用的拥塞控
制算法，它通过交换机的ECN 标记来检测并指示
网络拥塞。交换机在发现拥塞时，会概率性地在
数据包上加上ECN标记，RDMA网卡则根据这些
标记来判断网络状况，并通过CNP报文来调整数
据传输速率。DCQCN算法公平高效，非常适合高
性能计算和AI学习等需要高吞吐、低时延的应用
场景。
但DCQCN也存在如下不足，导致网络吞吐率
徘徊在50%~60%：
拥塞指示不够精确：ECN标记只有 1bit，无
法细致区分不同程度的拥塞；
速率调整反应缓慢，精度不足：仅依赖CNP
报文来调整速率，缺乏其他网络信息反馈；
没有结合流量特征调优：没有考虑长短流的
不同特性，以及调度间隔周期；
没有考虑多路径均衡调度：多打一流量分布不
均，未能充分利用AI网络多路径带宽资源。
中兴通讯RoCEv2网络端网协同创新方案
传统DCQCN网络因其拥塞标记信息粗略和端
侧与网络侧流控机制的相对独立，难以在高吞
吐、满负荷的网络环境下避免拥塞、丢包和时延
等问题。为提升高性能网络的传输性能，中兴通
讯提出了RoCEv2 网络端网协同创新解决方案，通
过端网协同联动机制实现精准、快速的拥塞控制
和流量调度算法，使网络的吞吐率提升到90%以hatGPT的火爆，催生了人工智能从判
决式到生成式的跨越式发展，百亿千
亿参数规模的AI大模型训练如火如荼的
展开，对高性能网络提出了迫切需求。AI大模型
训练依赖于分布式并行计算，包括数据、流水和
张量并行，为了最大化发挥GPU算力，需要将通
信时间开销占比控制在5%以内，这就要求AI大模
型训练的网络必须是满足零丢包、低时延、高吞
吐大带宽以及大规模组网的高性能网络。
当前高性能网络主流解决方案
应用于AI 大模型训练场景的两大主流高性能
网络技术为IB网络和RoCEv2网络。
IB网络起源于上世纪九十年代，原旨在替代
PCI总线技术。然而，它在高性能计算和AI领域的
数据中心中意外受到欢迎并得到广泛应用。IB网
络通过信用流控机制实现了无丢包传输，并提供
QoS服务质量以优化特定流量。尽管 IB网络有诸
多优点，但由于其配置、维护和扩展的复杂性，
以及需要专门的硬件和子网管理器，导致成本较
高，并不像以太网那样普及。
RoCEv2网络是基于以太网演进的，它允许
通过封装RDMA帧在IP/UDP报文中实现远程直接
内存访问。当数据包抵达GPU服务器的RDMA网
卡时，数据可被直接传输到GPU内存，绕过CPU
以降低时延。另外，通过部署DCQCN等拥塞流控
方案，降低RoCEv2网络的拥塞和丢包。RoCEv2
网络为统一承载网络设计，满足高带宽、高弹性
组网，云化服务化和扩展性支持较好，是国产化
高性能网络的必选之路。